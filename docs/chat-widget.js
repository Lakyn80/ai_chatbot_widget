(function(i,u){typeof exports=="object"&&typeof module<"u"?u(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],u):(i=typeof globalThis<"u"?globalThis:i||self,u(i.React,i.ReactDOM))})(this,function(i,u){"use strict";function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b={exports:{}},l={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v;function j(){if(v)return l;v=1;var e=i,a=Symbol.for("react.element"),h=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,y=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function d(s,o,m){var t,n={},c=null,x=null;m!==void 0&&(c=""+m),o.key!==void 0&&(c=""+o.key),o.ref!==void 0&&(x=o.ref);for(t in o)p.call(o,t)&&!g.hasOwnProperty(t)&&(n[t]=o[t]);if(s&&s.defaultProps)for(t in o=s.defaultProps,o)n[t]===void 0&&(n[t]=o[t]);return{$$typeof:a,type:s,key:c,ref:x,props:n,_owner:y.current}}return l.Fragment=h,l.jsx=d,l.jsxs=d,l}var w;function C(){return w||(w=1,b.exports=j()),b.exports}var r=C(),f={},k;function O(){if(k)return f;k=1;var e=u;return f.createRoot=e.createRoot,f.hydrateRoot=e.hydrateRoot,f}var N=O();const R=_(N);function E({themeColor:e="#ec4899",introMessage:a="Ahoj! Jak vám mohu pomoci s našimi náramky?",apiBaseUrl:h="https://aichatbotwidget-production.up.railway.app"}){const[p,y]=i.useState(!1),[g,d]=i.useState([{from:"bot",text:a}]),[s,o]=i.useState(""),m=async()=>{if(!s.trim())return;const t={from:"user",text:s};d(n=>[...n,t]),o("");try{const x={from:"bot",text:(await(await fetch(`${h}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})})).json()).response};d(S=>[...S,x])}catch{d(c=>[...c,{from:"bot",text:"❌ Chyba při komunikaci se serverem."}])}};return r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>y(!p),className:"bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-full shadow-lg fixed bottom-4 right-4 z-[9999]",children:p?"Zavřít":"💬 Chat"}),p&&r.jsxs("div",{className:"w-80 h-[480px] bg-white border border-pink-300 rounded-2xl fixed bottom-20 right-4 z-[9999] flex flex-col overflow-hidden shadow-xl",children:[r.jsx("div",{className:"bg-pink-500 text-white text-center py-2 font-semibold",children:"🤖 Náramkový Asistent"}),r.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 bg-pink-50 text-sm",children:g.map((t,n)=>r.jsx("div",{className:`px-4 py-2 rounded-2xl max-w-[85%] ${t.from==="user"?"ml-auto bg-pink-200 text-right":"mr-auto bg-white border border-pink-200"}`,children:t.text},n))}),r.jsx("div",{className:"p-3 bg-white border-t border-pink-200",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-pink-300 rounded-full focus:outline-none focus:ring-2 focus:ring-pink-400 text-sm",placeholder:"Napište zprávu…",value:s,onChange:t=>o(t.target.value),onKeyDown:t=>t.key==="Enter"&&m()}),r.jsx("button",{onClick:m,className:"bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-full text-sm",children:"Odeslat"})]})})]})]})}window.ChatbotWidget={init:(e={})=>{if(document.getElementById("chatbot-widget-container"))return;const a=document.createElement("div");a.id="chatbot-widget-container",document.body.appendChild(a),R.createRoot(a).render(r.jsx(E,{themeColor:e.themeColor||"#ec4899",introMessage:e.introMessage||"Ahoj! Jak vám mohu pomoci s našimi náramky?"}))},destroy:()=>{const e=document.getElementById("chatbot-widget-container");e&&(R.createRoot(e).unmount(),e.remove())}},window.addEventListener("DOMContentLoaded",()=>{window.ChatbotWidget&&!document.getElementById("chatbot-widget-container")&&window.ChatbotWidget.init()})});
