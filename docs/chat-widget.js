(function(s,u){typeof exports=="object"&&typeof module<"u"?u(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],u):(s=typeof globalThis<"u"?globalThis:s||self,u(s.React,s.ReactDOM))})(this,function(s,u){"use strict";function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x={exports:{}},c={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y;function C(){if(y)return c;y=1;var e=s,i=Symbol.for("react.element"),m=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,d=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function h(n,t,w){var r,a={},g=null,_=null;w!==void 0&&(g=""+w),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(_=t.ref);for(r in t)p.call(t,r)&&!f.hasOwnProperty(r)&&(a[r]=t[r]);if(n&&n.defaultProps)for(r in t=n.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:i,type:n,key:g,ref:_,props:a,_owner:d.current}}return c.Fragment=m,c.jsx=h,c.jsxs=h,c}var b;function O(){return b||(b=1,x.exports=C()),x.exports}var o=O(),l={},v;function k(){if(v)return l;v=1;var e=u;return l.createRoot=e.createRoot,l.hydrateRoot=e.hydrateRoot,l}var E=k();const R=j(E);function N({themeColor:e,introMessage:i}){const[m,p]=s.useState([{sender:"bot",text:i}]),[d,f]=s.useState(""),h=async()=>{if(!d.trim())return;const n={sender:"user",text:d};p(a=>[...a,n]),f("");const r={sender:"bot",text:(await(await fetch("https://aichatbotwidget-production.up.railway.app/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d})})).json()).response};p(a=>[...a,r])};return o.jsxs("div",{className:"p-4 bg-white text-sm",children:[o.jsx("div",{className:"space-y-2 mb-3 max-h-64 overflow-y-auto",children:m.map((n,t)=>o.jsx("div",{className:`p-2 rounded-xl ${n.sender==="user"?"bg-pink-100 text-right ml-auto w-fit":"bg-pink-200 text-left mr-auto w-fit"}`,children:n.text},t))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border border-pink-300 rounded-full px-3 py-1 text-sm focus:outline-none",value:d,onChange:n=>f(n.target.value),placeholder:"Napište zprávu..."}),o.jsx("button",{className:"bg-pink-500 hover:bg-pink-600 text-white px-3 py-1 rounded-full text-sm",onClick:h,children:"Odeslat"})]})]})}function M({themeColor:e,introMessage:i}){return o.jsx("div",{className:"fixed bottom-6 right-6 z-50 w-80 max-w-[90vw] shadow-xl rounded-2xl overflow-hidden border border-pink-300 bg-white animate-fade-in",children:o.jsx(N,{themeColor:e,introMessage:i})})}window.ChatbotWidget={init:(e={})=>{if(document.getElementById("chatbot-widget-container"))return;const i=document.createElement("div");i.id="chatbot-widget-container",document.body.appendChild(i),R.createRoot(i).render(o.jsx(M,{themeColor:e.themeColor||"#ec4899",introMessage:e.introMessage||"Ahoj! Jak vám mohu pomoci s našimi náramky?"}))},destroy:()=>{const e=document.getElementById("chatbot-widget-container");e&&(R.createRoot(e).unmount(),e.remove())}},window.addEventListener("DOMContentLoaded",()=>{window.ChatbotWidget&&!document.getElementById("chatbot-widget-container")&&window.ChatbotWidget.init()})});
