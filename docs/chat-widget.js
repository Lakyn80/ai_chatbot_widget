(function(i,l){typeof exports=="object"&&typeof module<"u"?l(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],l):(i=typeof globalThis<"u"?globalThis:i||self,l(i.React,i.ReactDOM))})(this,function(i,l){"use strict";function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v;function j(){if(v)return p;v=1;var e=i,s=Symbol.for("react.element"),u=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,g=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function a(d,o,n){var t,c={},f=null,x=null;n!==void 0&&(f=""+n),o.key!==void 0&&(f=""+o.key),o.ref!==void 0&&(x=o.ref);for(t in o)y.call(o,t)&&!m.hasOwnProperty(t)&&(c[t]=o[t]);if(d&&d.defaultProps)for(t in o=d.defaultProps,o)c[t]===void 0&&(c[t]=o[t]);return{$$typeof:s,type:d,key:f,ref:x,props:c,_owner:g.current}}return p.Fragment=u,p.jsx=a,p.jsxs=a,p}var w;function C(){return w||(w=1,b.exports=j()),b.exports}var r=C(),h={},k;function O(){if(k)return h;k=1;var e=l;return h.createRoot=e.createRoot,h.hydrateRoot=e.hydrateRoot,h}var N=O();const R=_(N);function E({themeColor:e="#ec4899",introMessage:s="Ahoj! Jak vám mohu pomoci s našimi náramky?"}){const[u,y]=i.useState(!1),[g,m]=i.useState([{from:"bot",text:s}]),[a,d]=i.useState(""),o=async()=>{if(!a.trim())return;const n={from:"user",text:a};m(t=>[...t,n]),d("");try{const f={from:"bot",text:(await(await fetch("https://aichatbotwidget-production.up.railway.app/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})})).json()).response};m(x=>[...x,f])}catch{m(c=>[...c,{from:"bot",text:"❌ Chyba při komunikaci se serverem."}])}};return r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>y(!u),className:"bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-full shadow-lg fixed bottom-4 right-4 z-[9999]",children:u?"Zavřít":"💬 Chat"}),u&&r.jsxs("div",{className:"w-80 h-[480px] bg-white border border-pink-300 rounded-2xl fixed bottom-20 right-4 z-[9999] flex flex-col overflow-hidden shadow-xl",children:[r.jsx("div",{className:"bg-pink-500 text-white text-center py-2 font-semibold",children:"🤖 Náramkový Asistent"}),r.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 bg-pink-50 text-sm",children:g.map((n,t)=>r.jsx("div",{className:`px-4 py-2 rounded-2xl max-w-[85%] ${n.from==="user"?"ml-auto bg-pink-200 text-right":"mr-auto bg-white border border-pink-200"}`,children:n.text},t))}),r.jsx("div",{className:"p-3 bg-white border-t border-pink-200",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-pink-300 rounded-full focus:outline-none focus:ring-2 focus:ring-pink-400 text-sm",placeholder:"Napište zprávu…",value:a,onChange:n=>d(n.target.value),onKeyDown:n=>n.key==="Enter"&&o()}),r.jsx("button",{onClick:o,className:"bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-full text-sm",children:"Odeslat"})]})})]})]})}window.ChatbotWidget={init:(e={})=>{if(document.getElementById("chatbot-widget-container"))return;const s=document.createElement("div");s.id="chatbot-widget-container",document.body.appendChild(s),R.createRoot(s).render(r.jsx(E,{themeColor:e.themeColor||"#ec4899",introMessage:e.introMessage||"Ahoj! Jak vám mohu pomoci s našimi náramky?"}))},destroy:()=>{const e=document.getElementById("chatbot-widget-container");e&&(R.createRoot(e).unmount(),e.remove())}},window.addEventListener("DOMContentLoaded",()=>{window.ChatbotWidget&&!document.getElementById("chatbot-widget-container")&&window.ChatbotWidget.init()})});
